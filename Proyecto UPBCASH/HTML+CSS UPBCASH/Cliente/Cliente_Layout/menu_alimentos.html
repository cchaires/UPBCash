<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UPBCash - Menu de alimentos</title>
  <link rel="stylesheet" href="styles_cliente_layout.css" />
</head>

<body>
  <div class="page">
    <div class="app-shell">

      <!-- SIDEBAR -->
      <aside class="sidebar">
        <div class="brand">
          <img class="brand__logo" src="imgupbcash-logo-c.png" alt="UPBCash" />
        </div>

        <nav class="nav" aria-label="Secciones del cliente">
          <a class="nav__item" href="cliente_layout.html">
            <span class="nav__icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 11l9-7 9 7"/><path d="M5 10v10h14V10"/></svg></span><span>Inicio</span>
          </a>

          <a class="nav__item" href="cliente_mapa.html"><span class="nav__icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 21s7-4.6 7-11a7 7 0 0 0-14 0c0 6.4 7 11 7 11z"/><circle cx="12" cy="10" r="2.5"/></svg></span><span>Mapa</span>
          </a>

          <a class="nav__item nav__item--active" href="menu_alimentos.html">
            <span class="nav__icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 3h16"/><path d="M4 8h16"/><path d="M4 13h16"/><path d="M4 18h10"/></svg></span><span>Menu alimentos</span>
          </a>

          <a class="nav__item" href="../historial_compras/historial_compras.html">
            <span class="nav__icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2v8"/><path d="M10 2v8"/><path d="M2 6h12"/><path d="M14 2h4a2 2 0 0 1 2 2v18"/></svg></span><span>Historial compras</span>
          </a>

          <a class="nav__item" href="../Recarga_Saldo/recarga_saldo.html">
            <span class="nav__icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="5" width="18" height="14" rx="2"/><path d="M3 10h18"/></svg></span><span>Recarga</span>
          </a>
        </nav>

        <div class="sidebar__spacer"></div>

        <div class="userbox">
          <div class="userbox__avatar">&#128100;</div>

          <div class="userbox__info">
            <div class="userbox__name">Fernando</div>
            <div class="userbox__sub">Cliente</div>
          </div>

          <button class="userbox__toggle" id="userToggle" aria-haspopup="true" aria-expanded="false" aria-label="Abrir menu de cuenta"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9l6 6 6-6"/></svg></button>

          <div class="userbox__menu" id="userMenu" role="menu" aria-hidden="true">
  <a href="../../MiCuenta/MiCuenta_Layout/mi_cuenta.html" role="menuitem">Cuenta</a>
  <a href="../../Vendedor/Vendedor_Layout/vendedor_layout.html" role="menuitem">Vendedor</a>
  <a href="../../Administrador/Layout_admin_inicio/admin_inicio.html" role="menuitem">Administrador</a>
  <a href="../../index/index.html" role="menuitem">Cerrar sesion</a>
</div>
        </div>
      </aside>

      <!-- MAIN -->
      <main class="main">
        <div class="main__inner main__inner--scroll">
          <header class="main__header">
            <div>
              <h1 class="page-title">Menu de alimentos</h1>
              <p class="page-subtitle page-subtitle--strong">Elige lo que quieras comprar.</p>
            </div>
            <a class="btn btn--cart" href="carrito%20de%20compras/carrito.html">
              Carrito de compras
              <span class="badge" id="cartCount">0</span>
            </a>
          </header>

          <section class="card">
            <div class="menu-grid">
              <article class="menu-item" data-item-id="tacos" data-name="Tacos al pastor" data-price="45">
                <div class="item__photo item__photo--taco">Foto del taco</div>
                <div class="item__name">Tacos al pastor</div>
                <div class="item__desc">Orden con pina, cilantro y cebolla.</div>
                <div class="item__location">Ubicacion: D-1</div>
                <div class="item__price">
                  $45
                  <span class="item__badge">Disponible</span>
                </div>
                <div class="item__actions">
                  <button class="btn btn--primary btn--sm" type="button" data-action="buy">Comprar</button>
                  <button class="btn btn--secondary btn--sm" type="button" data-action="add">Agregar al carrito</button>
                </div>
              </article>

              <article class="menu-item" data-item-id="cafe" data-name="Cafe de olla" data-price="28">
                <div class="item__photo item__photo--cafe">Foto del cafe</div>
                <div class="item__name">Cafe de olla</div>
                <div class="item__desc">Canela y piloncillo, 12 oz.</div>
                <div class="item__location">Ubicacion: D-2</div>
                <div class="item__price">
                  $28
                  <span class="item__badge">Disponible</span>
                </div>
                <div class="item__actions">
                  <button class="btn btn--primary btn--sm" type="button" data-action="buy">Comprar</button>
                  <button class="btn btn--secondary btn--sm" type="button" data-action="add">Agregar al carrito</button>
                </div>
              </article>

              <article class="menu-item" data-item-id="agua" data-name="Agua de jamaica" data-price="22">
                <div class="item__photo item__photo--agua">Foto del agua</div>
                <div class="item__name">Agua de jamaica</div>
                <div class="item__desc">Recien preparada, 16 oz.</div>
                <div class="item__location">Ubicacion: D-3</div>
                <div class="item__price">
                  $22
                  <span class="item__badge item__badge--low"><span class="status-dot"></span>Por agotar</span>
                </div>
                <div class="item__actions">
                  <button class="btn btn--primary btn--sm" type="button" data-action="buy">Comprar</button>
                  <button class="btn btn--secondary btn--sm" type="button" data-action="add">Agregar al carrito</button>
                </div>
              </article>

              <article class="menu-item" data-item-id="postre" data-name="Cheesecake fresa" data-price="38">
                <div class="item__photo item__photo--postre">Foto del postre</div>
                <div class="item__name">Cheesecake fresa</div>
                <div class="item__desc">Rebanada individual, cremosa.</div>
                <div class="item__location">Ubicacion: D-4</div>
                <div class="item__price">
                  $38
                  <span class="item__badge">Disponible</span>
                </div>
                <div class="item__actions">
                  <button class="btn btn--primary btn--sm" type="button" data-action="buy">Comprar</button>
                  <button class="btn btn--secondary btn--sm" type="button" data-action="add">Agregar al carrito</button>
                </div>
              </article>

              <article class="menu-item" data-item-id="ensalada" data-name="Ensalada verde" data-price="40">
                <div class="item__photo item__photo--ensalada">Foto de ensalada</div>
                <div class="item__name">Ensalada verde</div>
                <div class="item__desc">Mix de hojas, aderezo citrico.</div>
                <div class="item__location">Ubicacion: D-5</div>
                <div class="item__price">
                  $40
                  <span class="item__badge">Disponible</span>
                </div>
                <div class="item__actions">
                  <button class="btn btn--primary btn--sm" type="button" data-action="buy">Comprar</button>
                  <button class="btn btn--secondary btn--sm" type="button" data-action="add">Agregar al carrito</button>
                </div>
              </article>

              <article class="menu-item" data-item-id="combo" data-name="Combo campus" data-price="95">
                <div class="item__photo item__photo--combo">Foto del combo</div>
                <div class="item__name">Combo campus</div>
                <div class="item__desc">2 tacos + bebida + postre.</div>
                <div class="item__location">Ubicacion: D-6</div>
                <div class="item__price">
                  $95
                  <span class="item__badge">Disponible</span>
                </div>
                <div class="item__actions">
                  <button class="btn btn--primary btn--sm" type="button" data-action="buy">Comprar</button>
                  <button class="btn btn--secondary btn--sm" type="button" data-action="add">Agregar al carrito</button>
                </div>
              </article>
            </div>
          </section>
        </div>
      </main>

    </div>
  </div>

  <script src="dropdown_cliente.js"></script>
  <script>
    const STORAGE_KEY = "upbcash_cart";

    const getCart = () => {
      try {
        return JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
      } catch {
        return [];
      }
    };

    const setCart = (items) => {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(items));
    };

    const updateBadge = () => {
      const count = getCart().reduce((acc, item) => acc + item.qty, 0);
      const badge = document.getElementById("cartCount");
      if (badge) badge.textContent = String(count);
    };

    const addItem = (card) => {
      const id = card.dataset.itemId;
      const name = card.dataset.name;
      const price = Number(card.dataset.price || 0);
      const cart = getCart();
      const existing = cart.find((item) => item.id === id);
      if (existing) {
        existing.qty += 1;
      } else {
        cart.push({ id, name, price, qty: 1 });
      }
      setCart(cart);
      updateBadge();
    };

    document.querySelectorAll(".menu-item").forEach((card) => {
      const buyBtn = card.querySelector('[data-action="buy"]');
      const addBtn = card.querySelector('[data-action="add"]');

      buyBtn?.addEventListener("click", () => {
        addItem(card);
        window.location.href = "carrito%20de%20compras/carrito.html?pay=1";
      });

      addBtn?.addEventListener("click", () => {
        addItem(card);
      });
    });

    updateBadge();
  </script>
</body>
</html>













