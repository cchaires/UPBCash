{% extends 'core/layouts/client_shell.html' %}

{% block title %}UPBCash - Reportar recarga{% endblock %}

{% block content %}
<header class="main__header">
  <div>
    <h1 class="page-title">Reportar problema de recarga</h1>
    <p class="page-subtitle">Si tu recarga no se reflejo, llena este formulario.</p>
  </div>
  <a class="btn btn--ghost" href="{% url 'historial_recargas' %}">Volver</a>
</header>

{% if error_message %}
<p class="flash flash--error">{{ error_message }}</p>
{% endif %}

<section class="card">
  <div class="list-item mb-14">
    <div>
      <div class="list-item__title">Recarga seleccionada</div>
      <div class="list-item__meta">ID: {{ recarga.code }} · {{ recarga.created_at|date:"d M" }} · {{ recarga.card_label }}</div>
    </div>
    <div class="list-item__price">+${{ recarga.amount|floatformat:2 }}</div>
  </div>

  <form class="form form--wide" method="post" action="{% url 'reporte_recarga' recarga.code %}" novalidate>
    {% csrf_token %}
    <div class="field">
      <label for="recarga-id">ID de la recarga</label>
      <input id="recarga-id" class="input" type="text" value="{{ recarga.code }}" readonly />
    </div>

    <div class="field">
      <label for="recarga-correo">Correo del cliente</label>
      <input id="recarga-correo" name="recarga_correo" class="input" type="email" placeholder="correo@ejemplo.com" value="{{ request.user.email }}" required />
    </div>

    <div class="field">
      <label for="recarga-monto">Monto de la recarga</label>
      <input id="recarga-monto" class="input" type="text" value="+${{ recarga.amount|floatformat:2 }}" readonly />
    </div>

    <div class="field">
      <label for="recarga-fecha">Fecha de la recarga</label>
      <input id="recarga-fecha" class="input" type="text" value="{{ recarga.created_at|date:'d M' }}" readonly />
    </div>

    <div class="field">
      <label for="recarga-motivo">Motivo</label>
      <select id="recarga-motivo" name="recarga_motivo" class="input">
        <option>La recarga no se reflejo</option>
        <option>Monto incorrecto</option>
        <option>Pago duplicado</option>
        <option>Otro</option>
      </select>
    </div>

    <div class="field">
      <label for="recarga-detalle">Descripcion del problema</label>
      <textarea id="recarga-detalle" name="recarga_detalle" class="input" rows="4" placeholder="Describe lo ocurrido..." required></textarea>
    </div>

    <div class="field">
      <label for="recarga-comprobante">Comprobante de compra (imagen)</label>
      <input id="recarga-comprobante" class="input" type="file" accept="image/*" />
    </div>

    <div class="actions-row">
      <a class="btn btn--ghost" href="{% url 'historial_recargas' %}">Cancelar</a>
      <button class="btn btn--primary" type="submit">Enviar reporte</button>
    </div>
  </form>
</section>
{% endblock %}
