{% extends 'core/layouts/admin_shell.html' %}
{% load static %}

{% block title %}UPBCash - Mapa administrador{% endblock %}

{% block content %}
<section class="card">
  <h1 class="page-title">Mapa y ubicaciones</h1>
  {% if event %}<p class="page-subtitle">Vista general de quioscos y espacios para {{ event.name }}.</p>{% else %}<p class="page-subtitle">No hay evento activo configurado.</p>{% endif %}
  <div class="map-card mt-12">
    <img class="map-image" src="{% static 'core/img/mapa_upbc.png' %}" alt="Mapa del evento" />
  </div>
</section>

<section class="card mt-14">
  <div class="menu-grid">
    <article class="menu-item"><div class="item__name">Espacios disponibles</div><div class="item__desc">Sin asignacion</div><div class="item__price"><span>{{ available_spots }}</span></div></article>
    <article class="menu-item"><div class="item__name">Espacios asignados</div><div class="item__desc">Con vendedor activo</div><div class="item__price"><span>{{ assigned_spots }}</span></div></article>
    <article class="menu-item"><div class="item__name">Espacios bloqueados</div><div class="item__desc">Fuera de operacion</div><div class="item__price"><span>{{ blocked_spots }}</span></div></article>
  </div>
</section>

<section class="card mt-14">
  <h2 class="page-title staff-section-title">Asignaciones de puestos</h2>
  <div class="menu-grid">
    {% for row in assignment_rows %}
    <article class="menu-item">
      <div class="item__name">{{ row.stall.name }}</div>
      <div class="item__desc">{{ row.spot.label }}{% if row.spot.zone %} ({{ row.spot.zone.name }}){% endif %}</div>
      <div class="item__price"><span>Asignado</span></div>
    </article>
    {% empty %}
    <article class="menu-item">
      <div class="item__name">Sin asignaciones</div>
      <div class="item__desc">Cuando staff asigne puestos y espacios apareceran aqui.</div>
      <div class="item__price"><span>--</span></div>
    </article>
    {% endfor %}
  </div>
</section>
{% endblock %}
